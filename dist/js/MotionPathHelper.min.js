/*! project-name v0.0.1 | (c) 2020 YOUR NAME | MIT License | http://link-to-your-git-repo.com */
!(function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).window=t.window||{})})(this,(function(t){"use strict";var e,i=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,s=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,n=Math.PI/180,h=Math.sin,o=Math.cos,r=Math.abs,a=Math.sqrt,l=Math.atan2,c=1e8,d=function(t){return"number"==typeof t},u=function(t){return~~(1e5*t+(t<0?-.5:.5))/1e5},p=function(t,e){return e.totalLength=t.totalLength,t.samples?(e.samples=t.samples.slice(0),e.lookup=t.lookup.slice(0),e.minLength=t.minLength,e.resolution=t.resolution):e.totalPoints=t.totalPoints,e};function g(t){for(var e=[],i=0;i<t.length;i++)e[i]=p(t[i],t[i].slice(0));return p(t,e)}function f(t,e,i,s,n,h,o){for(var r,a,l,c,d,u=t.length;--u>-1;)for(a=(r=t[u]).length,l=0;l<a;l+=2)c=r[l],d=r[l+1],r[l]=c*e+d*s+h,r[l+1]=c*i+d*n+o;return t._dirty=1,t}function _(t,e,i,s,l,c,d,u,p){if(t!==u||e!==p){i=r(i),s=r(s);var g=l%360*n,f=o(g),_=h(g),v=Math.PI,m=2*v,b=(t-u)/2,y=(e-p)/2,A=f*b+_*y,P=-_*b+f*y,x=A*A,w=P*P,S=x/(i*i)+w/(s*s);S>1&&(i=a(S)*i,s=a(S)*s);var E=i*i,C=s*s,k=(E*C-E*w-C*x)/(E*w+C*x);k<0&&(k=0);var M=(c===d?-1:1)*a(k),D=M*(i*P/s),H=M*(-s*A/i),T=(t+u)/2+(f*D-_*H),R=(e+p)/2+(_*D+f*H),N=(A-D)/i,X=(P-H)/s,L=(-A-D)/i,I=(-P-H)/s,O=N*N+X*X,q=(X<0?-1:1)*Math.acos(N/a(O)),V=(N*I-X*L<0?-1:1)*Math.acos((N*L+X*I)/a(O*(L*L+I*I)));isNaN(V)&&(V=v),!d&&V>0?V-=m:d&&V<0&&(V+=m),q%=m,V%=m;var Y,G=Math.ceil(r(V)/(m/4)),j=[],z=V/G,B=4/3*h(z/2)/(1+o(z/2)),F=f*i,W=_*i,U=_*-s,Z=f*s;for(Y=0;Y<G;Y++)A=o(l=q+Y*z),P=h(l),N=o(l+=z),X=h(l),j.push(A-B*P,P+B*A,N+B*X,X-B*N,N,X);for(Y=0;Y<j.length;Y+=2)A=j[Y],P=j[Y+1],j[Y]=A*F+P*U+T,j[Y+1]=A*W+P*Z+R;return j[Y-2]=u,j[Y-1]=p,j}}function v(t){var e,n,h,o,a,l,c,d,u,p,g,f,v,m,b,y=(t+"").replace(s,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(i)||[],A=[],P=0,x=0,w=y.length,S=0,E="ERROR: malformed path: "+t,C=function(t,e,i,s){p=(i-t)/3,g=(s-e)/3,c.push(t+p,e+g,i-p,s-g,i,s)};if(!t||!isNaN(y[0])||isNaN(y[1]))return console.log(E),A;for(e=0;e<w;e++)if(v=a,isNaN(y[e])?l=(a=y[e].toUpperCase())!==y[e]:e--,h=+y[e+1],o=+y[e+2],l&&(h+=P,o+=x),e||(d=h,u=o),"M"===a)c&&(c.length<8?A.length-=1:S+=c.length),P=d=h,x=u=o,c=[h,o],A.push(c),e+=2,a="L";else if("C"===a)c||(c=[0,0]),l||(P=x=0),c.push(h,o,P+1*y[e+3],x+1*y[e+4],P+=1*y[e+5],x+=1*y[e+6]),e+=6;else if("S"===a)p=P,g=x,"C"!==v&&"S"!==v||(p+=P-c[c.length-4],g+=x-c[c.length-3]),l||(P=x=0),c.push(p,g,h,o,P+=1*y[e+3],x+=1*y[e+4]),e+=4;else if("Q"===a)p=P+2/3*(h-P),g=x+2/3*(o-x),l||(P=x=0),P+=1*y[e+3],x+=1*y[e+4],c.push(p,g,P+2/3*(h-P),x+2/3*(o-x),P,x),e+=4;else if("T"===a)p=P-c[c.length-4],g=x-c[c.length-3],c.push(P+p,x+g,h+2/3*(P+1.5*p-h),o+2/3*(x+1.5*g-o),P=h,x=o),e+=2;else if("H"===a)C(P,x,P=h,x),e+=1;else if("V"===a)C(P,x,P,x=h+(l?x-P:0)),e+=1;else if("L"===a||"Z"===a)"Z"===a&&(h=d,o=u,c.closed=!0),("L"===a||r(P-h)>.5||r(x-o)>.5)&&(C(P,x,h,o),"L"===a&&(e+=2)),P=h,x=o;else if("A"===a){if(m=y[e+4],b=y[e+5],p=y[e+6],g=y[e+7],n=7,m.length>1&&(m.length<3?(g=p,p=b,n--):(g=b,p=m.substr(2),n-=2),b=m.charAt(1),m=m.charAt(0)),f=_(P,x,+y[e+1],+y[e+2],+y[e+3],+m,+b,(l?P:0)+1*p,(l?x:0)+1*g),e+=n,f)for(n=0;n<f.length;n++)c.push(f[n]);P=c[c.length-2],x=c[c.length-1]}else console.log(E);return(e=c.length)<6?(A.pop(),e=0):c[0]===c[e-2]&&c[1]===c[e-1]&&(c.closed=!0),A.totalPoints=S+e,A}function m(t,e,i,s,n,h,o,a,l,c,d){var u,p=(t+i)/2,g=(e+s)/2,f=(i+n)/2,_=(s+h)/2,v=(n+o)/2,b=(h+a)/2,y=(p+f)/2,A=(g+_)/2,P=(f+v)/2,x=(_+b)/2,w=(y+P)/2,S=(A+x)/2,E=o-t,C=a-e,k=r((i-o)*C-(s-a)*E),M=r((n-o)*C-(h-a)*E);return c||(c=[t,e,o,a],d=2),c.splice(d||c.length-2,0,w,S),(k+M)*(k+M)>l*(E*E+C*C)&&(u=c.length,m(t,e,p,g,y,A,w,S,l,c,d),m(w,S,P,x,v,b,o,a,l,c,d+2+(c.length-u))),c}function b(t,e,i){var s,n,r,c,d,p,g,f,_,v,m,b,y,A,P=t.length-2,x=+t[0],w=+t[1],S=+t[2],E=+t[3],C=[x,w,x,w],k=S-x,M=E-w;for(isNaN(i)&&(i=Math.PI/10),e=e||0===e?+e:1,d=2;d<P;d+=2)s=x,n=w,x=S,w=E,b=(p=k)*p+(f=M)*f,y=(k=(S=+t[d+2])-x)*k+(M=(E=+t[d+3])-w)*M,A=(g=S-s)*g+(_=E-n)*_,m=(r=Math.acos((b+y-A)/a(4*b*y)))/Math.PI*e,v=a(b)*m,m*=a(y),x===s&&w===n||(r>i?(c=l(_,g),C.push(u(x-o(c)*v),u(w-h(c)*v),u(x),u(w),u(x+o(c)*m),u(w+h(c)*m))):(c=l(f,p),C.push(u(x-o(c)*v),u(w-h(c)*v)),c=l(M,k),C.push(u(x),u(w),u(x+o(c)*m),u(w+h(c)*m))));return C.push(u(S),u(E),u(S),u(E)),C}function y(t,e){var i,s,n,h,o,r,a,l=parseFloat(t[0]),c=parseFloat(t[1]),d=[l,c],u=t.length-2;for(e=Math.pow(e||1,2),i=2;i<u;i+=2)(h=l-(s=parseFloat(t[i])))*h+(o=c-(n=parseFloat(t[i+1])))*o>e&&(d.push(s,n),l=s,c=n);return d.push(parseFloat(t[u]),parseFloat(t[u+1])),(function t(e,i,s,n,h){var o,r,a,l,c,d,u,p,g,f,_,v,m=n,b=e[i],y=e[i+1],A=e[s],P=e[s+1];for(r=i+2;r<s;r+=2)l=e[r],c=e[r+1],f=void 0,_=void 0,v=void 0,v=(g=P)-(u=y),((_=(p=A)-(d=b))||v)&&((f=((l-d)*_+(c-u)*v)/(_*_+v*v))>1?(d=p,u=g):f>0&&(d+=_*f,u+=v*f)),(a=Math.pow(l-d,2)+Math.pow(c-u,2))>m&&(o=r,m=a);m>n&&(o-i>2&&t(e,i,o,n,h),h.push(e[o],e[o+1]),s-o>2&&t(e,o,s,n,h))})(d,0,a=d.length-2,e,r=[d[0],d[1]]),r.push(d[a],d[a+1]),r}function A(t,i,s,n,h,o,r,a,l,d,u,p,g,f){var _,v,m,b,y=(h-n)/o,P=0,x=n;for(e=c;x<=h;)(_=(v=(b=1-x)*b*b*r+3*b*b*x*l+3*b*x*x*u+x*x*x*g-i)*v+(m=b*b*b*a+3*b*b*x*d+3*b*x*x*p+x*x*x*f-s)*m)<e&&(e=_,P=x),x+=y;return t>1?A(t-1,i,s,Math.max(P-y,0),Math.min(P+y,1),o,r,a,l,d,u,p,g,f):P}var P,x,w,S,E,C,k,M="transform",D=M+"Origin",H=[],T=[],R=function(){return x.pageYOffset||P.scrollTop||w.scrollTop||S.scrollTop||0},N=function(){return x.pageXOffset||P.scrollLeft||w.scrollLeft||S.scrollLeft||0},X=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},L=function t(e){return"fixed"===x.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},I=function t(e,i){if(e.parentNode&&(P||(function(t){var e=t.ownerDocument||t;!(M in t.style)&&"msTransform"in t.style&&(D=(M="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););return x=window,k=new V,e&&(P=e,w=e.documentElement,S=e.body),e})(e))){var s=X(e),n=s?s.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",h=s?i?"rect":"g":"div",o=2!==i?0:100,r=3===i?100:0,a="position:absolute;display:block;pointer-events:none;",l=P.createElementNS?P.createElementNS(n.replace(/^https/,"http"),h):P.createElement(h);return i&&(s?(C||(C=t(e)),l.setAttribute("width",1),l.setAttribute("height",1),l.setAttribute("transform","translate("+o+","+r+")"),C.appendChild(l)):(E||((E=t(e)).style.cssText=a),l.style.cssText=a+"width:1px;height:1px;top:"+r+"px;left:"+o+"px",E.appendChild(l))),l}throw"Need document and parent."},O=function(t){var e,i,s,n,h,o=X(t),r=t===o,a=o?H:T;return t===x?t:(a.length||a.push(I(t,1),I(t,2),I(t,3)),e=o?C:E,o?(s=r?{x:0,y:0}:t.getBBox(),(i=t.transform?t.transform.baseVal:[]).length?(n=(i=i.consolidate().matrix).a*s.x+i.c*s.y,h=i.b*s.x+i.d*s.y):(i=k,n=s.x,h=s.y),"g"===t.tagName.toLowerCase()&&(n=h=0),e.setAttribute("transform","matrix("+i.a+","+i.b+","+i.c+","+i.d+","+(i.e+n)+","+(i.f+h)+")"),(r?o:t.parentNode).appendChild(e)):(e.style.top=t.offsetTop+"px",e.style.left=t.offsetLeft+"px",i=x.getComputedStyle(t),e.style[M]=i[M],e.style[D]=i[D],e.style.position="fixed"===i.position?"fixed":"absolute",t.parentNode.appendChild(e)),e)},q=function(t,e,i,s,n,h,o){return t.a=e,t.b=i,t.c=s,t.d=n,t.e=h,t.f=o,t},V=(function(){function t(t,e,i,s,n,h){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=1),void 0===n&&(n=0),void 0===h&&(h=0),q(this,t,e,i,s,n,h)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,i=this.c,s=this.d,n=this.e,h=this.f,o=t*s-e*i;return q(this,s/o,-e/o,-i/o,t/o,(i*h-s*n)/o,-(t*h-e*n)/o)},e.multiply=function(t){var e=this.a,i=this.b,s=this.c,n=this.d,h=this.e,o=this.f,r=t.a,a=t.c,l=t.b,c=t.d,d=t.e,u=t.f;return q(this,r*e+l*s,r*i+l*n,a*e+c*s,a*i+c*n,h+d*e+u*s,o+d*i+u*n)},e.equals=function(t){var e=this.a,i=this.b,s=this.c,n=this.d,h=this.e,o=this.f;return e===t.a&&i===t.b&&s===t.c&&n===t.d&&h===t.e&&o===t.f},e.apply=function(t,e){void 0===e&&(e={});var i=t.x,s=t.y,n=this.a,h=this.b,o=this.c,r=this.d,a=this.e,l=this.f;return e.x=i*n+s*o+a,e.y=i*h+s*r+l,e},t})();var Y,G,j,z,B,F,W,U,Z,$,K,Q,J,tt=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,et="#4e7fff",it=Math.PI/180,st=Date.now||function(){return(new Date).getTime()},nt=0,ht=0,ot=function(){return!1},rt={},at=[],lt={},ct=[],dt=[],ut=function(t){t.preventDefault&&(t.preventDefault(),t.preventManipulation&&t.preventManipulation())},pt=function(t){return Y.createElementNS?Y.createElementNS("http://www.w3.org/1999/xhtml",t):Y.createElement(t)},gt=function(t,e,i){var s,n=Y.createElementNS("http://www.w3.org/2000/svg",t),h=/([a-z])([A-Z])/g;for(s in(i=i||{}).class=i.class||"path-editor",i)void 0!==n.style[s]?n.style[s]=i[s]:n.setAttributeNS(null,s.replace(h,"$1-$2").toLowerCase(),i[s]);return e.appendChild(n),n},ft={matrix:new V},_t=function(t){return(t.transform&&t.transform.baseVal.consolidate()||ft).matrix},vt=function(t){return~~(1e3*t+(t<0?-.5:.5))/1e3},mt=function(t){return["M-"+(t=vt(t)),-t,t,-t,t,t,-t,t+"z"].join(",")},bt=function(t){var e=vt(.552284749831*t);return"M"+(t=vt(t))+",0C"+[t,e,e,t,0,t,-e,t,-t,e,-t,0,-t,-e,-e,-t,0,-t,e,-t,t,-e,t,0].join(",")+"z"},yt=function(t){if(!t.target._gsSelection&&!ht&&st()-nt>100){for(var e=dt.length;--e>-1;)dt[e].deselect();dt.length=0}},At=0,Pt=function(t,e,i,s){if(t.addEventListener){var n=K[e];s=s||{passive:!1},t.addEventListener(n||e,i,s),n&&e!==n&&"pointer"!==n.substr(0,7)&&t.addEventListener(e,i,s)}else t.attachEvent&&t.attachEvent("on"+e,i)},xt=function(t,e,i){if(t.removeEventListener){var s=K[e];t.removeEventListener(s||e,i),s&&e!==s&&"pointer"!==s.substr(0,7)&&t.removeEventListener(e,i)}else t.detachEvent&&t.detachEvent("on"+e,i)},wt=function t(e){At=e.touches&&_dragCount<e.touches.length,xt(e.target,"touchend",t)},St=function(t){At=t.touches&&_dragCount<t.touches.length,Pt(t.target,"touchend",wt)},Et=function(t,e){return function(i){return t.call(e,i)}},Ct=function(t,e,i){var s=e.vars[t];return s&&s.call(e.vars.callbackScope||e,i||e),e},kt=function(){Q.style.display="block",Q.select(),Q.style.display="none"},Mt=function(){Y=document,j=window,z=Y.body,$=pt("div"),(Q=pt("textarea")).style.display="none",z&&z.appendChild(Q),K=(function(t){for(var e=t.split(","),i=(void 0!==$.onpointerdown?"pointerdown,pointermove,pointerup,pointercancel":void 0!==$.onmspointerdown?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(","),s={},n=4;--n>-1;)s[e[n]]=i[n],s[i[n]]=e[n];return s})("touchstart,touchmove,touchend,touchcancel"),SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())},Y.addEventListener("keydown",(function(t){var e,i,s,n,h=t.keyCode||t.which,o=t.key||h;if("Shift"===o||16===h)W=!0;else if("Control"===o||17===h)B=!0;else if("Meta"===o||91===h)U=!0;else if("Alt"===o||18===h)for(F=!0,e=dt.length;--e>-1;)dt[e]._onPressAlt();else if(("z"===o||90===h)&&(B||U)&&at.length>1){if(at.shift(),i=at[0]){for((n=i.path).path.setAttribute("d",i.d),n.path.setAttribute("transform",i.transform),n.init(),s=n._anchors,e=0;e<s.length;e++)-1!==i.selectedIndexes.indexOf(s[e].i)&&n._selectedAnchors.push(s[e]);n._updateAnchors(),n.update(),n.vars.onUndo&&n.vars.onUndo.call(n)}}else if("Delete"===o||"Backspace"===o||8===h||46===h||63272===h||"d"===h&&(B||U))for(e=dt.length;--e>-1;)dt[e]._deleteSelectedAnchors();else if(("a"===o||65===h)&&(U||B))for(e=dt.length;--e>-1;)dt[e].select(!0)}),!0),Y.addEventListener("keyup",(function(t){var e=t.key||t.keyCode||t.which;if("Shift"===e||16===e)W=!1;else if("Control"===e||17===e)B=!1;else if("Meta"===e||91===e)U=!1;else if("Alt"===e||18===e){F=!1;for(var i=dt.length;--i>-1;)dt[i]._onReleaseAlt()}}),!0),G=!!j.PointerEvent,Pt(Y,"mouseup",yt),Pt(Y,"touchend",yt),Pt(Y,"touchcancel",ot),Pt(j,"touchmove",ot),z&&z.addEventListener("touchstart",ot),J=1},Dt=function(t){var e,i,s=(function(t,e){if(!t||!t.parentNode)return new V;var i=X(t)?H:T,s=O(t),n=i[0].getBoundingClientRect(),h=i[1].getBoundingClientRect(),o=i[2].getBoundingClientRect(),r=s.parentNode,a=L(t),l=new V((h.left-n.left)/100,(h.top-n.top)/100,(o.left-n.left)/100,(o.top-n.top)/100,n.left+(a?0:N()),n.top+(a?0:R()));return r.removeChild(s),e?l.inverse():l})(this.target.parentNode,!0);this._matrix=this.target.transform.baseVal.getItem(0).matrix,this._ctm=s,K[t.type]?(e=-1!==t.type.indexOf("touch")?t.currentTarget||t.target:Y,Pt(e,"touchend",this._onRelease),Pt(e,"touchmove",this._onMove),Pt(e,"touchcancel",this._onRelease),Pt(Y,"touchstart",St),Pt(j,"touchforcechange",ut)):(e=null,Pt(Y,"mousemove",this._onMove)),G||Pt(Y,"mouseup",this._onRelease),ut(t),kt(),t.changedTouches?(t=this.touch=t.changedTouches[0],this.touchID=t.identifier):t.pointerId?this.touchID=t.pointerId:this.touch=this.touchID=null,this._startPointerY=this.pointerY=t.pageY,this._startPointerX=this.pointerX=t.pageX,this._startElementX=this._matrix.e,this._startElementY=this._matrix.f,1===this._ctm.a&&0===this._ctm.b&&0===this._ctm.c&&1===this._ctm.d?this._ctm=null:(i=this._startPointerX*this._ctm.a+this._startPointerY*this._ctm.c+this._ctm.e,this._startPointerY=this._startPointerX*this._ctm.b+this._startPointerY*this._ctm.d+this._ctm.f,this._startPointerX=i),this.isPressed=ht=!0,this.touchEventTarget=e,this.vars.onPress&&this.vars.onPress.call(this.vars.callbackScope||this,this.pointerEvent)},Ht=function(t){var e,i,s=t;if(this._enabled&&!At&&this.isPressed&&t){if(this.pointerEvent=t,e=t.changedTouches){if((t=e[0])!==this.touch&&t.identifier!==this.touchID){for(i=e.length;--i>-1&&(t=e[i]).identifier!==this.touchID;);if(i<0)return}}else if(t.pointerId&&this.touchID&&t.pointerId!==this.touchID)return;ut(s),this.setPointerPosition(t.pageX,t.pageY),this.vars.onDrag&&this.vars.onDrag.call(this.vars.callbackScope||this,this.pointerEvent)}},Tt=function(t,e){if(this._enabled&&this.isPressed&&(!t||null==this.touchID||e||!(t.pointerId&&t.pointerId!==this.touchID||t.changedTouches&&!(function(t,e){for(var i=t.length;--i>-1;)if(t[i].identifier===e)return!0;return!1})(t.changedTouches,this.touchID)))){nt=st(),this.isPressed=ht=!1;var i,s,n=t,h=this.isDragging,o=this.touchEventTarget;if(o?(xt(o,"touchend",this._onRelease),xt(o,"touchmove",this._onMove),xt(o,"touchcancel",this._onRelease),xt(Y,"touchstart",St)):xt(Y,"mousemove",this._onMove),G||(xt(Y,"mouseup",this._onRelease),t&&t.target&&xt(t.target,"mouseup",this._onRelease)),h?this.isDragging=!1:this.vars.onClick&&this.vars.onClick.call(this.vars.callbackScope||this,n),t){if((i=t.changedTouches)&&(t=i[0])!==this.touch&&t.identifier!==this.touchID){for(s=i.length;--s>-1&&(t=i[s]).identifier!==this.touchID;);if(s<0)return}this.pointerEvent=n,this.pointerX=t.pageX,this.pointerY=t.pageY}return n&&!h&&this.vars.onDragRelease?this.vars.onDragRelease.call(this,this.pointerEvent):(n&&ut(n),this.vars.onRelease&&this.vars.onRelease.call(this.vars.callbackScope||this,this.pointerEvent)),h&&this.vars.onDragEnd&&this.vars.onDragEnd.call(this.vars.callbackScope||this,this.pointerEvent),!0}},Rt=function(t,e,i,s){var n,h=t[e].length,o=[];for(n=0;n<h;n+=6)o.push(new Lt(i,t,e,n,s));return o},Nt=function(t,e,i){var s=t[i]-t[e],n=t[i+1]-t[e+1];return Math.sqrt(s*s+n*n)},Xt=(function(){function t(t,e){this.target="string"==typeof t?Y.querySelectorAll(t)[0]:t,this.vars=e||{},this._onPress=Et(Dt,this),this._onMove=Et(Ht,this),this._onRelease=Et(Tt,this),this.target.setAttribute("transform",(this.target.getAttribute("transform")||"")+" translate(0,0)"),this._matrix=_t(this.target),this.x=this._matrix.e,this.y=this._matrix.f,this.snap=e.snap,isNaN(e.maxX)&&isNaN(e.minX)?this._bounds=0:(this._bounds=1,this.maxX=+e.maxX,this.minX=+e.minX),this.enabled(!0)}var e=t.prototype;return e.setPointerPosition=function(t,e){var i,s,n,h,o;this.pointerX=t,this.pointerY=e,this._ctm&&(o=t*this._ctm.a+e*this._ctm.c+this._ctm.e,e=t*this._ctm.b+e*this._ctm.d+this._ctm.f,t=o),(s=e-this._startPointerY)<1&&s>-1&&(s=0),(i=t-this._startPointerX)<1&&i>-1&&(i=0),n=(1e3*(this._startElementX+i)|0)/1e3,h=(1e3*(this._startElementY+s)|0)/1e3,this.snap&&!W&&(lt.x=n,lt.y=h,this.snap.call(this,lt),n=lt.x,h=lt.y),this.x===n&&this.y===h||(this._matrix.f=this.y=h,this._matrix.e=this.x=n,!this.isDragging&&this.isPressed&&(this.isDragging=!0,Ct("onDragStart",this,this.pointerEvent)))},e.enabled=function(t){return arguments.length?(this._enabled=t,t?(G||Pt(this.target,"mousedown",this._onPress),Pt(this.target,"touchstart",this._onPress),Pt(this.target,"click",this._onClick,!0)):(e=this.isDragging,xt(this.target,"mousedown",this._onPress),xt(this.target,"touchstart",this._onPress),xt(j,"touchforcechange",ut),xt(this.target,"click",this._onClick),this.touchEventTarget&&(xt(this.touchEventTarget,"touchcancel",this._onRelease),xt(this.touchEventTarget,"touchend",this._onRelease),xt(this.touchEventTarget,"touchmove",this._onMove)),xt(Y,"mouseup",this._onRelease),xt(Y,"mousemove",this._onMove),this.isDragging=this.isPressed=!1,e&&Ct("onDragEnd",this,this.pointerEvent)),this):this._enabled;var e},e.endDrag=function(t){this._onRelease(t)},t})(),Lt=(function(){function t(t,e,i,s,n){this.editor=t,this.element=gt("path",t._selection,{fill:et,stroke:et,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this.update(e,i,s),this.element._gsSelection=!0,this.vars=n||{},this._draggable=new Xt(this.element,{callbackScope:this,onDrag:this.onDrag,snap:this.vars.snap,onPress:this.onPress,onRelease:this.onRelease,onClick:this.onClick,onDragEnd:this.onDragEnd})}var e=t.prototype;return e.onPress=function(){Ct("onPress",this)},e.onClick=function(){Ct("onClick",this)},e.onDrag=function(){var t=this.segment;this.vars.onDrag.call(this.vars.callbackScope||this,this,this._draggable.x-t[this.i],this._draggable.y-t[this.i+1])},e.onDragEnd=function(){Ct("onDragEnd",this)},e.onRelease=function(){Ct("onRelease",this)},e.update=function(t,e,i){t&&(this.rawPath=t),arguments.length<=1?(e=this.j,i=this.i):(this.j=e,this.i=i);var s=this.smooth,n=this.rawPath[e];this.segment=n,this.smooth=i&&i<n.length-2&&Math.abs(Math.atan2(n[i+1]-n[i-1],n[i]-n[i-2])-Math.atan2(n[i+3]-n[i+1],n[i+2]-n[i]))<.09?2:0,this.smooth!==s&&this.element.setAttribute("d",this.smooth?this.editor._circleHandle:this.editor._squareHandle),this.element.setAttribute("transform","translate("+n[i]+","+n[i+1]+")")},t})(),It=(function(){function t(t,e){e=e||{},J||Mt(),this.vars=e,this.path="string"==typeof t?Y.querySelectorAll(t)[0]:t,this._g=gt("g",this.path.ownerSVGElement,{class:"path-editor-g path-editor"}),this._selectionHittest=gt("path",this._g,{stroke:"transparent",strokeWidth:16,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selection=e._selection||gt("g",this._g,{class:"path-editor-selection path-editor"}),this._selectionPath=gt("path",this._selection,{stroke:et,strokeWidth:2,fill:"none",vectorEffect:"non-scaling-stroke"}),this._selectedAnchors=[],this._line1=gt("polyline",this._selection,{stroke:et,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line2=gt("polyline",this._selection,{stroke:et,strokeWidth:2,vectorEffect:"non-scaling-stroke"}),this._line1.style.pointerEvents=this._line2.style.pointerEvents=this._selectionPath.style.pointerEvents="none",this._enabled=!0;var i=this.path.parentNode.getScreenCTM().inverse(),s=(i.a+i.d)/2*(e.handleSize||5);this._squareHandle=mt(s),this._circleHandle=bt(1.15*s),this._handle1=gt("path",this._selection,{d:this._squareHandle,fill:et,stroke:"transparent",strokeWidth:6}),this._handle2=gt("path",this._selection,{d:this._squareHandle,fill:et,stroke:"transparent",strokeWidth:6}),this._handle1._draggable=new Xt(this._handle1,{onDrag:this._onDragHandle1,callbackScope:this,onPress:this._onPressHandle1,onRelease:this._onReleaseHandle,onClick:this._onClickHandle1,snap:e.handleSnap}),this._handle2._draggable=new Xt(this._handle2,{onDrag:this._onDragHandle2,callbackScope:this,onPress:this._onPressHandle2,onRelease:this._onReleaseHandle,onClick:this._onClickHandle2,snap:e.handleSnap}),this._handle1.style.visibility=this._handle2.style.visibility="hidden";for(var n=[this._handle1,this._handle2,this._line1,this._line2,this._selection,this._selectionPath,this._selectionHittest],h=n.length;--h>-1;)n[h]._gsSelection=!0;!1!==e.draggable&&(this._draggable=new Xt(this._selectionHittest,{callbackScope:this,onPress:this.select,onRelease:this._onRelease,onDrag:this._onDragPath,onDragEnd:this._saveState,maxX:this.vars.maxX,minX:this.vars.minX})),this.init(),this._selection.style.visibility=!1===e.selected?"hidden":"visible",!1!==e.selected&&(this.path._gsSelection=!0,dt.push(this)),this._saveState(),G||(Pt(this._selectionHittest,"mousedown",Et(this._onClickSelectionPath,this)),Pt(this._selectionHittest,"mouseup",Et(this._onRelease,this))),Pt(this._selectionHittest,"touchstart",Et(this._onClickSelectionPath,this)),Pt(this._selectionHittest,"touchend",Et(this._onRelease,this))}var i=t.prototype;return i._onRelease=function(t){var e=this._editingAnchor;e&&(rt.x=e.segment[e.i],rt.y=e.segment[e.i+1]),xt(j,"touchforcechange",ut),Ct("onRelease",this,t)},i.init=function(){var t,e,i=this.path.getAttribute("d"),s=v(i),n=this.path.getAttribute("transform")||"translate(0,0)",h=!this._rawPath||s.totalPoints!==this._rawPath.totalPoints||s.length!==this._rawPath.length,o={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX};if(h&&this._anchors&&this._anchors.length){for(e=0;e<this._anchors.length;e++)this._anchors[e].element.parentNode.removeChild(this._anchors[e].element),this._anchors[e]._draggable.enabled(!1);this._selectedAnchors.length=0}if(this._rawPath=s,h){if(this._anchors=Rt(s,0,this,o),(t=s.length)>1)for(e=1;e<t;e++)this._anchors=this._anchors.concat(Rt(s,e,this,o))}else for(e=this._anchors.length;--e>-1;)this._anchors[e].update(s);return this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),this._selectionPath.setAttribute("d",i),this._selectionHittest.setAttribute("d",i),this._g.setAttribute("transform",(function(t){for(var e=_t(t),i=t.ownerSVGElement;(t=t.parentNode)&&t.ownerSVGElement===i;)e.multiply(_t(t));return"matrix("+e.a+","+e.b+","+e.c+","+e.d+","+e.e+","+e.f+")"})(this.path.parentNode)||"translate(0,0)"),this._selection.setAttribute("transform",n),this._selectionHittest.setAttribute("transform",n),this._updateAnchors(),this},i._saveState=function(){!(function(t){var e,i=[],s=t._selectedAnchors;for(e=0;e<s.length;e++)i[e]=s[e].i;at.unshift({path:t,d:t.path.getAttribute("d"),transform:t.path.getAttribute("transform")||"",selectedIndexes:i}),at.length>30&&(at.length=30)})(this)},i._onClickSelectionPath=function(t){if("hidden"===this._selection.style.visibility)this.select();else if(F||t&&t.altKey){var i,s,n,h,o,r,a={callbackScope:this,snap:this.vars.anchorSnap,onDrag:this._onDragAnchor,onPress:this._onPressAnchor,onRelease:this._onRelease,onClick:this._onClickAnchor,onDragEnd:this._onDragEndAnchor,maxX:this.vars.maxX,minX:this.vars.minX},l=this._selection.getScreenCTM().inverse();for(this._draggable&&this._draggable._onRelease(t),l&&(h=t.clientX*l.a+t.clientY*l.c+l.e,o=t.clientX*l.b+t.clientY*l.d+l.f),r=(function(t,i,s,n){var h,o,r,a,l={j:0,i:0,t:0},d=c;for(o=0;o<t.length;o++)for(a=t[o],h=0;h<a.length;h+=6)r=A(1,i,s,0,1,n||20,a[h],a[h+1],a[h+2],a[h+3],a[h+4],a[h+5],a[h+6],a[h+7]),d>e&&(d=e,l.j=o,l.i=h,l.t=r);return l})(this._rawPath,h,o),(function(t,e,i){if(i<=0||i>=1)return 0;var s=t[e],n=t[e+1],h=t[e+2],o=t[e+3],r=t[e+4],a=t[e+5],l=s+(h-s)*i,c=h+(r-h)*i,d=n+(o-n)*i,p=o+(a-o)*i,g=l+(c-l)*i,f=d+(p-d)*i,_=r+(t[e+6]-r)*i,v=a+(t[e+7]-a)*i;c+=(_-c)*i,p+=(v-p)*i,t.splice(e+2,4,u(l),u(d),u(g),u(f),u(g+(c-g)*i),u(f+(p-f)*i),u(c),u(p),u(_),u(v)),t.samples&&t.samples.splice(e/6*t.resolution|0,0,0,0,0,0,0,0)})(this._rawPath[r.j],r.i,r.t),i=r.i+6,s=0;s<this._anchors.length;s++)this._anchors[s].i>=i&&(this._anchors[s].i+=6);n=new Lt(this,this._rawPath,r.j,i,a),this._selection.appendChild(this._handle1),this._selection.appendChild(this._handle2),n._draggable._onPress(t),Z=n,this._anchors.push(n),this._selectedAnchors.length=0,this._selectedAnchors.push(n),this._updateAnchors(),this.update(),this._saveState()}kt(),Pt(j,"touchforcechange",ut),Ct("onPress",this)},i._onClickHandle1=function(){var t=this._editingAnchor,e=t.i,i=t.segment;F&&Math.abs(i[e]-i[e-2])<5&&Math.abs(i[e+1]-i[e-1])<5&&this._onClickAnchor(t)},i._onClickHandle2=function(){var t=this._editingAnchor,e=t.i,i=t.segment;F&&Math.abs(i[e]-i[e+2])<5&&Math.abs(i[e+1]-i[e+3])<5&&this._onClickAnchor(t)},i._onDragEndAnchor=function(t){Z=null,this._saveState()},i.isSelected=function(){return this._selectedAnchors.length>0},i.select=function(t){if(this._selection.style.visibility="visible",this._editingAnchor=null,this.path._gsSelection=!0,!0===t)for(var e=this._anchors.length;--e>-1;)this._selectedAnchors[e]=this._anchors[e];return-1===dt.indexOf(this)&&dt.push(this),this._updateAnchors(),this},i.deselect=function(){return this._selection.style.visibility="hidden",this._selectedAnchors.length=0,this._editingAnchor=null,this.path._gsSelection=!1,dt.splice(dt.indexOf(this),1),this._updateAnchors(),this},i._onDragPath=function(t){var e=this._selectionHittest.getAttribute("transform")||"translate(0,0)";this._selection.setAttribute("transform",e),this.path.setAttribute("transform",e)},i._onPressAnchor=function(t){-1===this._selectedAnchors.indexOf(t)?(W||(this._selectedAnchors.length=0),this._selectedAnchors.push(t)):W&&(this._selectedAnchors.splice(this._selectedAnchors.indexOf(t),1),t._draggable.endDrag()),rt.x=t.segment[t.i],rt.y=t.segment[t.i+1],this._updateAnchors(),Ct("onPress",this)},i._deleteSelectedAnchors=function(){for(var t,e,i,s=this._selectedAnchors,n=s.length;--n>-1;)for((t=s[n]).element.parentNode.removeChild(t.element),t._draggable.enabled(!1),(e=t.i)?e<t.segment.length-2?t.segment.splice(e-2,6):t.segment.splice(e-4,6):t.segment.splice(e,6),s.splice(n,1),this._anchors.splice(this._anchors.indexOf(t),1),i=0;i<this._anchors.length;i++)this._anchors[i].i>=e&&(this._anchors[i].i-=6);this._updateAnchors(),this.update(),this._saveState(),this.vars.onDeleteAnchor&&this.vars.onDeleteAnchor.call(this.vars.callbackScope||this)},i._onClickAnchor=function(t){var e,i,s,n,h,o,r=t.i,a=t.segment,l=!r||r>=a.length-2;F&&Z!==t&&this._editingAnchor?(t.smooth=!t.smooth,l&&(t.smooth=!1),t.element.setAttribute("d",t.smooth?this._circleHandle:this._squareHandle),t.smooth&&!l?(e=((e=Math.atan2(a[r+1]-a[r-1],a[r]-a[r-2]))+(i=Math.atan2(a[r+3]-a[r+1],a[r+2]-a[r])))/2,s=Nt(a,r-2,r),n=Nt(a,r,r+2),s<.2&&(s=Nt(a,r,r-6)/4,e=i||Math.atan2(a[r+7]-a[r-5],a[r+6]-a[r-6])),n<.2&&(n=Nt(a,r,r+6)/4,i=e||Math.atan2(a[r+7]-a[r-5],a[r+6]-a[r-6])),h=Math.sin(e),o=Math.cos(e),Math.abs(i-e)<Math.PI/2&&(h=-h,o=-o),a[r-2]=(1e3*(a[r]+o*s)|0)/1e3,a[r-1]=(1e3*(a[r+1]+h*s)|0)/1e3,a[r+2]=(1e3*(a[r]-o*n)|0)/1e3,a[r+3]=(1e3*(a[r+1]-h*n)|0)/1e3,this._updateAnchors(),this.update(),this._saveState()):t.smooth||l||(r&&(a[r-2]=a[r],a[r-1]=a[r+1]),r<a.length-2&&(a[r+2]=a[r],a[r+3]=a[r+1]),this._updateAnchors(),this.update(),this._saveState())):W||(this._selectedAnchors.length=0,this._selectedAnchors.push(t)),Z=null,this._updateAnchors()},i._updateAnchors=function(){var t,e,i,s=1===this._selectedAnchors.length?this._selectedAnchors[0]:null,n=s?s.segment:null;for(this._editingAnchor=s,t=0;t<this._anchors.length;t++)this._anchors[t].element.style.fill=-1!==this._selectedAnchors.indexOf(this._anchors[t])?et:"white";s&&(this._handle1.setAttribute("d",s.smooth?this._circleHandle:this._squareHandle),this._handle2.setAttribute("d",s.smooth?this._circleHandle:this._squareHandle)),t=s?s.i:0,s&&t?(e=n[t-2],i=n[t-1],this._handle1.style.visibility=this._line1.style.visibility=F||e!==n[t]||i!==n[t+1]?"visible":"hidden",this._handle1.setAttribute("transform","translate("+e+","+i+")"),this._line1.setAttribute("points",e+","+i+","+n[t]+","+n[t+1])):this._handle1.style.visibility=this._line1.style.visibility="hidden",s&&t<n.length-2?(e=n[t+2],i=n[t+3],this._handle2.style.visibility=this._line2.style.visibility=F||e!==n[t]||i!==n[t+1]?"visible":"hidden",this._handle2.setAttribute("transform","translate("+e+","+i+")"),this._line2.setAttribute("points",n[t]+","+n[t+1]+","+e+","+i)):this._handle2.style.visibility=this._line2.style.visibility="hidden"},i._onPressAlt=function(){var t=this._editingAnchor;t&&(t.i&&(this._handle1.style.visibility=this._line1.style.visibility="visible"),t.i<t.segment.length-2&&(this._handle2.style.visibility=this._line2.style.visibility="visible"))},i._onReleaseAlt=function(){var t,e,i=this._editingAnchor;i&&((t=i.segment)[e=i.i]===t[e-2]&&t[e+1]===t[e-1]&&(this._handle1.style.visibility=this._line1.style.visibility="hidden"),t[e]===t[e+2]&&t[e+1]===t[e+3]&&(this._handle2.style.visibility=this._line2.style.visibility="hidden"))},i._onPressHandle1=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=Nt(this._editingAnchor.segment,this._editingAnchor.i,this._editingAnchor.i+2)),Ct("onPress",this)},i._onPressHandle2=function(){this._editingAnchor.smooth&&(this._oppositeHandleLength=Nt(this._editingAnchor.segment,this._editingAnchor.i-2,this._editingAnchor.i)),Ct("onPress",this)},i._onReleaseHandle=function(t){this._onRelease(t),this._saveState()},i._onDragHandle1=function(){var t,e=this._editingAnchor,i=e.segment,s=e.i,n=this._handle1._draggable.x,h=this._handle1._draggable.y;i[s-2]=n=(1e3*n|0)/1e3,i[s-1]=h=(1e3*h|0)/1e3,e.smooth&&(F?(e.smooth=!1,e.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(t=Math.atan2(i[s+1]-h,i[s]-n),n=this._oppositeHandleLength*Math.cos(t),h=this._oppositeHandleLength*Math.sin(t),i[s+2]=(1e3*(i[s]+n)|0)/1e3,i[s+3]=(1e3*(i[s+1]+h)|0)/1e3)),this.update()},i._onDragHandle2=function(){var t,e=this._editingAnchor,i=e.segment,s=e.i,n=this._handle2._draggable.x,h=this._handle2._draggable.y;i[s+2]=n=(1e3*n|0)/1e3,i[s+3]=h=(1e3*h|0)/1e3,e.smooth&&(F?(e.smooth=!1,e.element.setAttribute("d",this._squareHandle),this._handle1.setAttribute("d",this._squareHandle),this._handle2.setAttribute("d",this._squareHandle)):(t=Math.atan2(i[s+1]-h,i[s]-n),n=this._oppositeHandleLength*Math.cos(t),h=this._oppositeHandleLength*Math.sin(t),i[s-2]=(1e3*(i[s]+n)|0)/1e3,i[s-1]=(1e3*(i[s+1]+h)|0)/1e3)),this.update()},i._onDragAnchor=function(t,e,i){var s,n,h,o,r=this._selectedAnchors,a=r.length;for(n=0;n<a;n++)s=(o=r[n]).i,h=o.segment,s&&(h[s-2]=(1e3*(h[s-2]+e)|0)/1e3,h[s-1]=(1e3*(h[s-1]+i)|0)/1e3),h[s]=(1e3*(h[s]+e)|0)/1e3,h[s+1]=(1e3*(h[s+1]+i)|0)/1e3,s<h.length-2&&(h[s+2]=(1e3*(h[s+2]+e)|0)/1e3,h[s+3]=(1e3*(h[s+3]+i)|0)/1e3),o!==t&&o.element.setAttribute("transform","translate("+h[s]+","+h[s+1]+")");this.update()},i.enabled=function(t){if(!arguments.length)return this._enabled;for(var e=this._anchors.length;--e>-1;)this._anchors[e]._draggable.enabled(t);return this._enabled=t,this._handle1._draggable.enabled(t),this._handle2._draggable.enabled(t),this._draggable&&this._draggable.enabled(t),t?this._selection.parentNode||(this.path.ownerSVGElement.appendChild(this._selectionHittest),this.path.ownerSVGElement.appendChild(this._selection),this.init(),this._saveState()):(this.deselect(),this.path.ownerSVGElement.removeChild(this._selectionHittest),this.path.ownerSVGElement.removeChild(this._selection)),this._updateAnchors(),this.update()},i.update=function(t){var e,i,s,n,h="",o=this._editingAnchor;if(t&&this.init(),o&&(e=o.i,i=o.segment,e&&(s=i[e-2],n=i[e-1],this._handle1.setAttribute("transform","translate("+s+","+n+")"),this._line1.setAttribute("points",s+","+n+","+i[e]+","+i[e+1])),e<i.length-2&&(s=i[e+2],n=i[e+3],this._handle2.setAttribute("transform","translate("+s+","+n+")"),this._line2.setAttribute("points",i[e]+","+i[e+1]+","+s+","+n))),t)h=this.path.getAttribute("d");else{for(e=0;e<this._rawPath.length;e++)(i=this._rawPath[e]).length>7&&(h+="M"+i[0]+","+i[1]+"C"+i.slice(2).join(","));this.path.setAttribute("d",h),this._selectionPath.setAttribute("d",h),this._selectionHittest.setAttribute("d",h)}return this.vars.onUpdate&&this._enabled&&Ct("onUpdate",this,h),this},i.getRawPath=function(t,e,i){if(t){var s=_t(this.path);return f(g(this._rawPath),1,0,0,1,s.e+(e||0),s.f+(i||0))}return this._rawPath},i.getString=function(t,e,i){if(t){var s=_t(this.path);return (function(t){d(t[0])&&(t=[t]);var e,i,s,n,h="",o=t.length;for(i=0;i<o;i++){for(n=t[i],h+="M"+u(n[0])+","+u(n[1])+" C",e=n.length,s=2;s<e;s++)h+=u(n[s++])+","+u(n[s++])+" "+u(n[s++])+","+u(n[s++])+" "+u(n[s++])+","+u(n[s])+" ";n.closed&&(h+="z")}return h})(f(g(this._rawPath),1,0,0,1,s.e+(e||0),s.f+(i||0)))}return this.path.getAttribute("d")},i.getNormalizedSVG=function(t,e,i,s){var n,h,o,r,a,l,c=this._rawPath[0],d=-1*c[0],u=0===e?0:-(e||c[1]),p=c.length,g=1/(c[p-2]+d),f=-t||c[p-1]+u;for(ct.length=0,f=f?1/f:-g,g*=1e3,f*=1e3,h=0;h<p;h+=2)ct[h]=((c[h]+d)*g|0)/1e3,ct[h+1]=((c[h+1]+u)*f|0)/1e3;if(s){for(n=[],p=ct.length,h=2;h<p;h+=6)o=ct[h-2],r=ct[h-1],a=ct[h+4],l=ct[h+5],n.push(o,r,a,l),m(o,r,ct[h],ct[h+1],ct[h+2],ct[h+3],a,l,.001,n,n.length-2);for(o=n[0],p=n.length,h=2;h<p;h+=2){if((a=n[h])<o||a>1||a<0){s();break}o=a}}return i&&8===p&&0===ct[0]&&0===ct[1]&&1===ct[p-2]&&1===ct[p-1]?ct.slice(2,6).join(","):(ct[2]="C"+ct[2],"M"+ct.join(","))},t})();It.simplifyPoints=y,It.pointsToSegment=b,It.simplifySVG=function(t,e){var i,s,n,h,o,r,a,l,c,d,u,p;if(d=(e=e||{}).tolerance||1,c=e.precision||1/d,p=(void 0===e.cornerThreshold?18:+e.cornerThreshold)*it,"string"!=typeof t&&(t=(i=t).getAttribute("d")),"#"!==t.charAt(0)&&"."!==t.charAt(0)||(i=Y.querySelector(t))&&(t=i.getAttribute("d")),s=!1!==e.curved||/[achqstvz]/gi.test(t)?v(t)[0]:t.match(tt),!1!==e.curved){for(l=s,s=[],u=l.length,n=2;n<u;n+=6)h=+l[n-2],r=+l[n-1],o=+l[n+4],a=+l[n+5],s.push(vt(h),vt(r),vt(o),vt(a)),m(h,r,+l[n],+l[n+1],+l[n+2],+l[n+3],o,a,1/(2e5*c),s,s.length-2);(s=b(y(s,d),e.curviness,p))[2]="C"+s[2]}else s=y(s,d);return t="M"+s.join(","),i&&i.setAttribute("d",t),t},It.create=function(t,e){return new It(t,e)},It.editingAxis=rt,It.getSnapFunction=function(t){var e=t.radius||2,i=t.x||0===t.x?t.x:t.width?0:-1e20,s=t.y||0===t.y?t.y:t.height?0:-1e20,n=i+(t.width||1e40),h=s+(t.height||1e40),o=!1!==t.containX,r=!1!==t.containY,a=t.axis,l=t.gridSize;return e*=e,function(t){var c,d,u,p,g=t.x,f=t.y;o&&g<i||(u=g-i)*u<e?g=i:(o&&g>n||(u=n-g)*u<e)&&(g=n),r&&f<s||(p=f-s)*p<e?f=s:(r&&f>h||(p=h-f)*p<e)&&(f=h),a&&(u=g-a.x,p=f-a.y,u*u<e&&(g=a.x),p*p<e&&(f=a.y)),l&&(u=(c=i+Math.round((g-i)/l)*l)-g)*u+(p=(d=s+Math.round((f-s)/l)*l)-f)*p<e&&(g=c,f=d),t.x=g,t.y=f}},It.version="3.1.1";var Ot,qt,Vt,Yt,Gt,jt,zt,Bt,Ft,Wt=/(^[#\.][a-z]|[a-y][a-z])/i,Ut=function(t){return"string"==typeof t},Zt=function(t,e){var i=Vt.createElementNS?Vt.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Vt.createElement(t);return i.style?i:Vt.createElement(t)},$t=function(t){var e=t.getBoundingClientRect(),i=Yt.clientTop-(qt.pageYOffset||Yt.scrollTop||Gt.scrollTop||0),s=Yt.clientLeft-(qt.pageXOffset||Yt.scrollLeft||Gt.scrollLeft||0);return{left:e.left+s,top:e.top+i,right:e.right+s,bottom:e.bottom+i}},Kt=function(t,e){var i,s=[0,31,8,58,24,75,40,90,69,100,100,100];for(i=0;i<s.length;i+=2)s[i]+=t,s[i+1]+=e;return"M"+t+","+e+"C"+s.join(",")},Qt=function(t){for(var e=t.totalTime();t;)e=t.startTime()+e/(t.timeScale()||1),t=t.parent;return e},Jt=function(t,e,i){return Ut(t)&&Wt.test(t)?Vt.querySelector(t):Array.isArray(t)?Bt(zt([{x:Ot.getProperty(e,"x"),y:Ot.getProperty(e,"y")}].concat(t),i)):Ut(t)||t&&"path"===(t.tagName+"").toLowerCase()?t:0},te=function(t,e,i){t.addEventListener("click",(function(s){if(s.target._gsHelper){var n=e(s.target);if(Ft.value=n,n&&Ft.select){console.log(n),Ft.style.display="block",Ft.select();try{Vt.execCommand("copy"),Ft.blur(),i&&i(t)}catch(t){console.warn("Copy didn't work; this browser doesn't permit that.")}Ft.style.display="none"}}}))},ee={matrix:{a:1,b:0,c:0,d:1,e:0,f:0}},ie=function(t){return(t.transform.baseVal.consolidate()||ee).matrix},se=function(t){for(var e=Ot.getTweensOf(t),i=0;i<e.length;i++){if(e[i].vars.motionPath)return e[i];e[i].timeline&&e.push.apply(e,e[i].timeline.getChildren())}},ne=function(t,e){var i="Please gsap.registerPlugin(MotionPathPlugin)";qt=window,Ot=Ot||t||qt.gsap||console.warn(i),Vt=document,Gt=Vt.body,Yt=Vt.documentElement,(jt=Ot&&Ot.plugins.motionPath)?((Ft=Zt("textarea")).style.display="none",Gt.appendChild(Ft),zt=jt.arrayToRawPath,Bt=jt.rawPathToString):!0===e&&console.warn(i)},he=(function(){function t(t,e){void 0===e&&(e={}),jt||ne(e.gsap,1);var i,s,n,h,o,r,a,l,c,d,u,p,g,f=Zt("div"),_=this,v={x:0,y:0};t instanceof Ot.core.Tween?i=(l=t).targets()[0]:(i=Ot.utils.toArray(t)[0],l=se(i)),s=Jt(e.path,i,e),this.offset=v,r=$t(i),h=parseFloat(Ot.getProperty(i,"x","px")),o=parseFloat(Ot.getProperty(i,"y","px")),n=i.getCTM&&"svg"!==i.tagName.toLowerCase(),l&&!s&&(s=Jt(l.vars.motionPath.path||l.vars.motionPath,i,l.vars.motionPath)),f.setAttribute("class","copy-motion-path"),f.style.cssText="border-radius:8px; background-color:rgba(85, 85, 85, 0.7); color:#fff; cursor:pointer; padding:6px 12px; font-family:Signika Negative, Arial, sans-serif; position:fixed; left:50%; transform:translate(-50%, 0); font-size:19px; bottom:10px",f.innerText="COPY MOTION PATH",f._gsHelper=_,(Ot.utils.toArray(e.container)[0]||Gt).appendChild(f),te(f,(function(){return _.getString()}),(function(){return Ot.fromTo(f,{backgroundColor:"white"},{duration:.5,backgroundColor:"rgba(85, 85, 85, 0.6)"})})),(a=s&&s.ownerSVGElement)||(c=n&&i.ownerSVGElement&&i.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg",n?(a=i.ownerSVGElement,d=i.getBBox(),h=(u=ie(i)).e,o=u.f,v.x=d.x,v.y=d.y):(a=Zt("svg",c),Gt.appendChild(a),a.setAttribute("viewBox","0 0 100 100"),a.style.cssText="overflow:visible; background-color: transparent; position:absolute; width:100px; height:100px; top:"+r.top+"px; left:"+r.left+"px;"),d=Ut(s)&&!Wt.test(s)?s:Kt(h,o),(s=Zt("path",c)).setAttribute("d",d),s.setAttribute("vector-effect","non-scaling-stroke"),s.style.cssText="fill:transparent; stroke-width:"+(e.pathWidth||3)+"; stroke:"+(e.pathColor||"#555")+"; opacity:"+(e.pathOpacity||.6),a.appendChild(s),(v.x||v.y)&&Ot.set(s,{x:v.x,y:v.y})),"selected"in e||(e.selected=!0),"anchorSnap"in e||(e.anchorSnap=function(t){t.x*t.x+t.y*t.y<16&&(t.x=t.y=0)}),g=l&&"nested"===l.parent.data?l.parent.parent:l,e.onPress=function(){g.pause(0)},p=function(){var t=ie(s);l.vars.motionPath.offsetX=t.e-v.x,l.vars.motionPath.offsetY=t.f-v.y,l.invalidate(),g.restart()},e.onRelease=e.onDeleteAnchor=p,this.editor=It.create(s,e),e.center&&Ot.set(i,{transformOrigin:"50% 50%",xPercent:-50,yPercent:-50}),l?(l.vars.motionPath.path?l.vars.motionPath.path=s:l.vars.motionPath={path:s},g.parent!==Ot.globalTimeline&&Ot.globalTimeline.add(g,Qt(g)-g.delay()),g.repeat(-1).repeatDelay(1)):l=g=Ot.to(i,{motionPath:{path:s,start:e.start||0,end:"end"in e?e.end:1,autoRotate:"autoRotate"in e&&e.autoRotate},duration:e.duration||5,ease:e.ease||"Power1.easeInOut",repeat:-1,repeatDelay:1,paused:!e.path}),this.animation=l}return t.prototype.getString=function(){return this.editor.getString(!0,-this.offset.x,-this.offset.y)},t})();he.register=ne,he.create=function(t,e){return new he(t,e)},he.version="3.1.1",t.MotionPathHelper=he,t.default=he,Object.defineProperty(t,"__esModule",{value:!0})}));